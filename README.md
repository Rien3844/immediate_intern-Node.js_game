# Click Event Challenge - Node.js (TCP + Cluster)

## 프로젝트 개요
1. HH시 00분 부터 1분 간 ⭐회사의 대표 마스코트인 😡(심술이)를 가장 많이 클릭한 사용자 경품 발송 이벤트
2. TCP를 통해 빠른 클릭 처리
3. 회원가입 요청 관리를 HTTP서버에서 진행해 다른 곳에서도 사용 가능
4. 슬라이딩 윈도우 방식으로 부정 클릭 감지
5. 실격 조건 및 우승자 선별 알고리즘 포함
6. **외부 라이브러리 없이 순수 Node.js**로 구성

## 개발 환경
### 개발 툴
VS-Code
### 프로그램 언어
Node.js(버전 22.14.0)

## 실행 방법
### HTTP 서버 실행
```
node http/server.js
```
### TCP 서버 실행
```
node index.js
```
### 테스트 실행
```
node test/e2e/eventFlow.test.js
```

## API 명세
### POST ```/signup```
#### 설명
유저 등록
#### 요청
```
{
  "userId": "string",
  "address": "string"
}
```
#### 응답
1. 200 OK: 등록 성공
2. 409 Conflict: 이미 등록됨
3. 400 Bad Request: 입력 누락/형식 오류
 
## 폴더 구조
📦immediate_intern-Node.js_game<br>
 ┣ 📂cluster<br>
 ┃ ┣ 📜master.js<br>
 ┃ ┗ 📜worker.js<br>
 ┣ 📂http<br>
 ┃ ┗ 📜server.js<br>
 ┣ 📂logic<br>
 ┃ ┣ 📜clickProcessor.js<br>
 ┃ ┗ 📜userManager.js<br>
 ┣ 📂test<br>
 ┃ ┣ 📂e2e<br>
 ┃ ┃ ┗ 📜eventFlow.test.js<br>
 ┃ ┗ 📂unit<br>
 ┃ ┃ ┗ 📜clickProcessor.test.js<br>
 ┣ 📜.gitattributes<br>
 ┣ 📜index.js<br>
 ┗ 📜README.md<br>

 ## 진행 상황
 ### 이벤트 참여 규칙<br>
 [O]“1분”은 00초부터 59.999999초를 의미합니다. 시간 범위에 들어오지 않은 클릭은 세지 말아야합니다.<br>
 [O]어떠한 연속된 1초 구간 내에 클릭 횟수가 4회를 초과하면 실격 처리됩니다. 초당 4회를 초과시 부정행위자로 간주하고 누적 클릭량에 관계 없이 실격 처리 됩니다.<br>
 [O]회원가입하지 않은 유저는 참여 할 수 없습니다.<br>
 [O]첫 클릭은 참여로 간주됩니다.<br>
 [O]참여한 유저가 10초간 클릭하지 않는다면 자동 실격 처리됩니다. 즉, 이후의 요청을 세지 말아야합니다.<br>
 [O]각종 사유로 실격한 참여자는 재참여 할 수 없습니다.<br>
 [O]경품이 비싸기 때문에 복수의 유저가 우승자가 될 수 없습니다. 클릭수가 동일한 선두가 생길 경우, 1 마이크로초라도 빠르게 클릭수에 도달한 유저가 우승자가 됩니다.<br>
 <br>
 ### 이벤트 개발 요구사항<br>
 [O]여러 사용자가 빠른 속도로 연속 요청 할 것 같으니 클릭 요청은 TCP로 받자고 합니다.<br>
 [O]회원가입 요청 관리는 다른 곳에서도 쓸 수 있게 HTTP 서버로 만들자고 합니다.<br>
 [O]배포했을 때 버그가 나면 안되니 e2e 테스트와 모든 이벤트 규칙들에 대한 유닛 테스트를 꼭 작성하라고 당부합니다.<br>
 [O]요청이 아주 많을 예정이니 클러스터 모드로 요청을 받자고 합니다.<br>
 [O]이벤트가 종료 된 후 우승자의 아이디, 주소지, 클릭 횟수를 출력할 수 있어야 합니다(테스트 코드로 표현해주세요).<br>
 [O]어떠한 외부 소스도 사용하지 말라고 합니다. 이게 무슨 말일까요?<br>
 
